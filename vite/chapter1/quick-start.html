<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>quick-start | RE 的学习小站</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="对各种学习内容的记录总结">
    
    <link rel="preload" href="/yg-notes/assets/css/0.styles.0edbbd45.css" as="style"><link rel="preload" href="/yg-notes/assets/js/app.b3cad06d.js" as="script"><link rel="preload" href="/yg-notes/assets/js/2.7fcefaab.js" as="script"><link rel="preload" href="/yg-notes/assets/js/75.e8d9233f.js" as="script"><link rel="prefetch" href="/yg-notes/assets/js/10.f0dc12ab.js"><link rel="prefetch" href="/yg-notes/assets/js/11.e035269e.js"><link rel="prefetch" href="/yg-notes/assets/js/12.c03b2ed9.js"><link rel="prefetch" href="/yg-notes/assets/js/13.ee957772.js"><link rel="prefetch" href="/yg-notes/assets/js/14.7c4928fe.js"><link rel="prefetch" href="/yg-notes/assets/js/15.522e3bfe.js"><link rel="prefetch" href="/yg-notes/assets/js/16.a20a7362.js"><link rel="prefetch" href="/yg-notes/assets/js/17.f3491dba.js"><link rel="prefetch" href="/yg-notes/assets/js/18.93d1a623.js"><link rel="prefetch" href="/yg-notes/assets/js/19.ad308a57.js"><link rel="prefetch" href="/yg-notes/assets/js/20.5918cac1.js"><link rel="prefetch" href="/yg-notes/assets/js/21.1b09434a.js"><link rel="prefetch" href="/yg-notes/assets/js/22.877697b6.js"><link rel="prefetch" href="/yg-notes/assets/js/23.320f6eb0.js"><link rel="prefetch" href="/yg-notes/assets/js/24.4e734ab8.js"><link rel="prefetch" href="/yg-notes/assets/js/25.23f71996.js"><link rel="prefetch" href="/yg-notes/assets/js/26.d3890643.js"><link rel="prefetch" href="/yg-notes/assets/js/27.43d6c28a.js"><link rel="prefetch" href="/yg-notes/assets/js/28.d76806b6.js"><link rel="prefetch" href="/yg-notes/assets/js/29.1baaec3d.js"><link rel="prefetch" href="/yg-notes/assets/js/3.2d6fd0ee.js"><link rel="prefetch" href="/yg-notes/assets/js/30.56dc5210.js"><link rel="prefetch" href="/yg-notes/assets/js/31.ae7a0678.js"><link rel="prefetch" href="/yg-notes/assets/js/32.f4cb88c9.js"><link rel="prefetch" href="/yg-notes/assets/js/33.431221a0.js"><link rel="prefetch" href="/yg-notes/assets/js/34.69dc37cb.js"><link rel="prefetch" href="/yg-notes/assets/js/35.24a44676.js"><link rel="prefetch" href="/yg-notes/assets/js/36.f8ac2a3f.js"><link rel="prefetch" href="/yg-notes/assets/js/37.df46ff35.js"><link rel="prefetch" href="/yg-notes/assets/js/38.545a70cf.js"><link rel="prefetch" href="/yg-notes/assets/js/39.35f9ff93.js"><link rel="prefetch" href="/yg-notes/assets/js/4.33d9e0d4.js"><link rel="prefetch" href="/yg-notes/assets/js/40.78bc835f.js"><link rel="prefetch" href="/yg-notes/assets/js/41.da13f728.js"><link rel="prefetch" href="/yg-notes/assets/js/42.4bc7f756.js"><link rel="prefetch" href="/yg-notes/assets/js/43.f8e88d32.js"><link rel="prefetch" href="/yg-notes/assets/js/44.9e6db372.js"><link rel="prefetch" href="/yg-notes/assets/js/45.bc337329.js"><link rel="prefetch" href="/yg-notes/assets/js/46.19fa2332.js"><link rel="prefetch" href="/yg-notes/assets/js/47.845c0ed0.js"><link rel="prefetch" href="/yg-notes/assets/js/48.cbb19574.js"><link rel="prefetch" href="/yg-notes/assets/js/49.7de657f3.js"><link rel="prefetch" href="/yg-notes/assets/js/5.89eafe95.js"><link rel="prefetch" href="/yg-notes/assets/js/50.fcf67144.js"><link rel="prefetch" href="/yg-notes/assets/js/51.d496e456.js"><link rel="prefetch" href="/yg-notes/assets/js/52.5496d903.js"><link rel="prefetch" href="/yg-notes/assets/js/53.5020f9a6.js"><link rel="prefetch" href="/yg-notes/assets/js/54.6ab2904d.js"><link rel="prefetch" href="/yg-notes/assets/js/55.8e509464.js"><link rel="prefetch" href="/yg-notes/assets/js/56.a2eaa597.js"><link rel="prefetch" href="/yg-notes/assets/js/57.3ac5f137.js"><link rel="prefetch" href="/yg-notes/assets/js/58.4b6f76fc.js"><link rel="prefetch" href="/yg-notes/assets/js/59.bd71fc12.js"><link rel="prefetch" href="/yg-notes/assets/js/6.0a121ed3.js"><link rel="prefetch" href="/yg-notes/assets/js/60.99a1fdb9.js"><link rel="prefetch" href="/yg-notes/assets/js/61.70d01a87.js"><link rel="prefetch" href="/yg-notes/assets/js/62.ead915c1.js"><link rel="prefetch" href="/yg-notes/assets/js/63.6b1350bd.js"><link rel="prefetch" href="/yg-notes/assets/js/64.f1010a8b.js"><link rel="prefetch" href="/yg-notes/assets/js/65.620e3b77.js"><link rel="prefetch" href="/yg-notes/assets/js/66.a0f17c93.js"><link rel="prefetch" href="/yg-notes/assets/js/67.77f00d20.js"><link rel="prefetch" href="/yg-notes/assets/js/68.4b5dccc0.js"><link rel="prefetch" href="/yg-notes/assets/js/69.3623365c.js"><link rel="prefetch" href="/yg-notes/assets/js/7.484f9988.js"><link rel="prefetch" href="/yg-notes/assets/js/70.7ea61157.js"><link rel="prefetch" href="/yg-notes/assets/js/71.422e9121.js"><link rel="prefetch" href="/yg-notes/assets/js/72.5bc89a6c.js"><link rel="prefetch" href="/yg-notes/assets/js/73.5fba2871.js"><link rel="prefetch" href="/yg-notes/assets/js/74.4399b0a0.js"><link rel="prefetch" href="/yg-notes/assets/js/76.b9f55fda.js"><link rel="prefetch" href="/yg-notes/assets/js/77.b0b4c200.js"><link rel="prefetch" href="/yg-notes/assets/js/78.8f3ea721.js"><link rel="prefetch" href="/yg-notes/assets/js/79.1b59f530.js"><link rel="prefetch" href="/yg-notes/assets/js/8.560034ab.js"><link rel="prefetch" href="/yg-notes/assets/js/80.56733bd0.js"><link rel="prefetch" href="/yg-notes/assets/js/81.bcfaf316.js"><link rel="prefetch" href="/yg-notes/assets/js/82.2abc33d9.js"><link rel="prefetch" href="/yg-notes/assets/js/83.f48127f5.js"><link rel="prefetch" href="/yg-notes/assets/js/84.475d6a15.js"><link rel="prefetch" href="/yg-notes/assets/js/9.29d47485.js">
    <link rel="stylesheet" href="/yg-notes/assets/css/0.styles.0edbbd45.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yg-notes/" class="home-link router-link-active"><!----> <span class="site-name">RE 的学习小站</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/jsbase/chapter1/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/yg-notes/axios/chapter1/" class="nav-link">
  axios
</a></li></ul></div></div><div class="nav-item"><a href="/yg-notes/css/chapter1/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/vue3/chapter1/" class="nav-link">
  vue3
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="books" class="dropdown-title"><span class="title">books</span> <span class="arrow down"></span></button> <button type="button" aria-label="books" class="mobile-dropdown-title"><span class="title">books</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/books/vuejs/chapter1/" class="nav-link">
  vue.js 设计与实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="compile Menu" class="dropdown-title"><span class="title">compile</span> <span class="arrow down"></span></button> <button type="button" aria-label="compile Menu" class="mobile-dropdown-title"><span class="title">compile</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/compiler/chapter1/" class="nav-link">
  Compiler
</a></li><li class="dropdown-item"><!----> <a href="/yg-notes/vite/chapter1/" class="nav-link router-link-active">
  vite小册
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm Menu" class="dropdown-title"><span class="title">algorithm</span> <span class="arrow down"></span></button> <button type="button" aria-label="algorithm Menu" class="mobile-dropdown-title"><span class="title">algorithm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/algorithm/chapter1/" class="nav-link">
  algorithm
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/jsbase/chapter1/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/yg-notes/axios/chapter1/" class="nav-link">
  axios
</a></li></ul></div></div><div class="nav-item"><a href="/yg-notes/css/chapter1/" class="nav-link">
  CSS
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/vue3/chapter1/" class="nav-link">
  vue3
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="books" class="dropdown-title"><span class="title">books</span> <span class="arrow down"></span></button> <button type="button" aria-label="books" class="mobile-dropdown-title"><span class="title">books</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/books/vuejs/chapter1/" class="nav-link">
  vue.js 设计与实现
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="compile Menu" class="dropdown-title"><span class="title">compile</span> <span class="arrow down"></span></button> <button type="button" aria-label="compile Menu" class="mobile-dropdown-title"><span class="title">compile</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/compiler/chapter1/" class="nav-link">
  Compiler
</a></li><li class="dropdown-item"><!----> <a href="/yg-notes/vite/chapter1/" class="nav-link router-link-active">
  vite小册
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="algorithm Menu" class="dropdown-title"><span class="title">algorithm</span> <span class="arrow down"></span></button> <button type="button" aria-label="algorithm Menu" class="mobile-dropdown-title"><span class="title">algorithm</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/yg-notes/algorithm/chapter1/" class="nav-link">
  algorithm
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>vite 小册</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yg-notes/vite/chapter1/" aria-current="page" class="sidebar-link">module standard</a></li><li><a href="/yg-notes/vite/chapter1/quick-start.html" aria-current="page" class="active sidebar-link">quick-start</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yg-notes/vite/chapter1/quick-start.html#环境搭建" class="sidebar-link">环境搭建</a></li><li class="sidebar-sub-header"><a href="/yg-notes/vite/chapter1/quick-start.html#项目初始化" class="sidebar-link">项目初始化</a></li><li class="sidebar-sub-header"><a href="/yg-notes/vite/chapter1/quick-start.html#项目入口加载" class="sidebar-link">项目入口加载</a></li><li class="sidebar-sub-header"><a href="/yg-notes/vite/chapter1/quick-start.html#初识配置文件" class="sidebar-link">初识配置文件</a></li><li class="sidebar-sub-header"><a href="/yg-notes/vite/chapter1/quick-start.html#生产环境构建" class="sidebar-link">生产环境构建</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>vite-project-framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yg-notes/vite/chapter2/" class="sidebar-link">vite中接入 css</a></li><li><a href="/yg-notes/vite/chapter2/lint.html" class="sidebar-link">代码规范：利用lint工具</a></li><li><a href="/yg-notes/vite/chapter2/assets.html" class="sidebar-link">vite 中处理各种静态资源</a></li><li><a href="/yg-notes/vite/chapter2/pre-bundling.html" class="sidebar-link">依赖预构建</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>双引擎架构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yg-notes/vite/chapter3/" class="sidebar-link">Esbuild</a></li><li><a href="/yg-notes/vite/chapter3/esbuild-plugin.html" class="sidebar-link">Esbuld plugin</a></li><li><a href="/yg-notes/vite/chapter3/rollup.html" class="sidebar-link">rollup basic</a></li><li><a href="/yg-notes/vite/chapter3/rollup-plugin.html" class="sidebar-link">rollup plugin</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="quick-start"><a href="#quick-start" class="header-anchor">#</a> quick-start</h1> <h2 id="环境搭建"><a href="#环境搭建" class="header-anchor">#</a> 环境搭建</h2> <div class="language- extra-class"><pre class="language-text"><code>npm i -g pnpm
</code></pre></div><p>设置镜像源</p> <div class="language- extra-class"><pre class="language-text"><code>pnpm config set registry https://registry.npmmirror.com/
</code></pre></div><h2 id="项目初始化"><a href="#项目初始化" class="header-anchor">#</a> 项目初始化</h2> <div class="language- extra-class"><pre class="language-text"><code>pnpm create vite
</code></pre></div><p>后续设置完1. 项目名称 2. 前端开发框架 3. 选择开发语言</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 进入项目目录</span>
cd vite<span class="token operator">-</span>project
<span class="token comment">// 安装依赖</span>
pnpm install
<span class="token comment">// 启动项目</span>
pnpm run dev
</code></pre></div><h2 id="项目入口加载"><a href="#项目入口加载" class="header-anchor">#</a> 项目入口加载</h2> <div class="language- extra-class"><pre class="language-text"><code>.
├── index.html
├── package.json
├── pnpm-lock.yaml
├── src
│   ├── App.css
│   ├── App.tsx
│   ├── favicon.svg
│   ├── index.css
│   ├── logo.svg
│   ├── main.tsx
│   └── vite-env.d.ts
├── tsconfig.json
└── vite.config.ts
</code></pre></div><p>值得注意的是，在项目根目录中有一个<code>index.html</code>文件，这个文件十分关键，因为 Vite 默认会把项目根目录下的<code>index.html</code>作为入口文件。也就是说，当你访问<code>http://localhost:3000</code>的时候，Vite 的 Dev Server 会自动返回这个 HTML 文件的内容。我们来看看这个 HTML 究竟写了什么:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/svg+xml<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/favicon.svg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Vite App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/main.tsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以看到这个 <code>HTML</code> 文件的内容非常简洁，在 <code>body</code> 标签中除了 id 为 root 的根节点之外，还包含了一个声明了<code>type=&quot;module&quot;</code>的 script 标签:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/src/main.tsx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>由于现代浏览器原生支持了 ES 模块规范，因此原生的 ES 语法也可以直接放到浏览器中执行，只需要在 <code>script</code> 标签中声明 <code>type=&quot;module&quot;</code> 即可。比如上面的 <code>script</code> 标签就声明了 <code>type=&quot;module&quot;</code>，同时 src 指向了<code>/src/main.tsx</code>文件，此时相当于请求了<code>http://localhost:3000/src/main.tsx</code>这个资源，Vite 的 Dev Server 此时会接受到这个请求，然后读取对应的文件内容，进行一定的中间处理，最后将处理的结果返回给浏览器</p> <img src="/yg-notes/assets/vite/1.awebp"> <p>到这里可能你会诧异: 浏览器并不识别 tsx 语法，也无法直接 import css 文件，上面这段代码究竟是如何被浏览器正常执行的呢？</p> <p>这就归功了 Vite Dev Server 所做的“中间处理”了，也就是说，在读取到 <code>main.tsx</code>文件的内容之后，Vite 会对文件的内容进行编译，大家可以从 Chrome 的网络调试面板看到编译后的结果</p> <img src="/yg-notes/assets/vite/2.awebp"> <p>这里你只需要知道，Vite 会将项目的源代码编译成浏览器可以识别的代码，与此同时，一个 import 语句即代表了一个 HTTP 请求，如下面两个 import 语句:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">&quot;/src/index.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;/src/App.tsx&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>需要注意的是，在 Vite 项目中，<strong>一个import 语句即代表一个 HTTP 请求</strong>。上述两个语句则分别代表了两个不同的请求，Vite Dev Server 会读取本地文件，返回浏览器可以解析的代码。当浏览器解析到新的 import 语句，又会发出新的请求，以此类推，直到所有的资源都加载完成。</p> <p>现在，你应该知道了 Vite 所倡导的 <code>no-bundle</code> 理念的真正含义: <strong>利用浏览器原生 ES 模块的支持，实现开发阶段的 Dev Server，进行模块的按需加载，而不是先整体打包再进行加载</strong>。相比 Webpack 这种必须打包再加载的传统构建模式，Vite 在开发阶段省略了繁琐且耗时的打包过程，这也是它为什么快的一个重要原因</p> <h2 id="初识配置文件"><a href="#初识配置文件" class="header-anchor">#</a> 初识配置文件</h2> <p>在使用 Vite 的过程，我们需要对 Vite 做一些配置，以满足日常开发的需要。你可以通过两种方式来对 Vite 进行配置，一是通过命令行参数，如 <code>vite --port=8888</code> ，二是通过配置文件，一般情况下，大多数的配置都通过配置文件的方式来声明。</p> <p>Vite 当中支持多种配置文件类型，包括<code>.js、.ts、.mjs</code>三种后缀的文件，实际项目中一般使用<code>vite.config.ts</code>作为配置文件，以脚手架项目中的配置为例，具体的配置代码如下:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>可以看到配置文件中默认在 plugins 数组中配置了官方的 react 插件，来提供 React 项目编译和热更新的功能。</p> <p>接下来，我们可以基于这个文件完成更加丰富的配置。之前我就遇到过这样一个需求: 页面的入口文件<code>index.html</code>并不在项目根目录下，而需要放到 src 目录下，如何在访问<code>localhost:3000</code>的时候让 Vite 自动返回 src 目录下的<code>index.html</code>呢？我们可以通过root参数配置项目根目录的位置:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// vite.config.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token comment">// 引入 path 包注意两点:</span>
<span class="token comment">// 1. 为避免类型报错，你需要通过 `pnpm i @types/node -D` 安装类型</span>
<span class="token comment">// 2. tsconfig.node.json 中设置 `allowSyntheticDefaultImports: true`，以允许下面的 default 导入方式</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 手动指定项目根目录位置</span>
  root<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>当手动指定root参数之后，Vite 会自动从这个路径下寻找index.html文件，也就是说当我直接访问 localhost:3000的时候，Vite 从src目录下读取入口文件，这样就成功实现了刚才的需求。</p> <h2 id="生产环境构建"><a href="#生产环境构建" class="header-anchor">#</a> 生产环境构建</h2> <p>有人说 <code>Vite</code> 因为其不打包的特性而不能上生产环境，其实这种观点是相当有误的。在开发阶段 Vite 通过 Dev Server 实现了不打包的特性，而在生产环境中，Vite 依然会基于 <code>Rollup</code> 进行打包，并采取一系列的打包优化手段</p> <p><code>package.json</code> 其中的<code>build</code>命令了，没错，这个命令就是 Vite 专门用来进行生产环境打包的。但可能你会有点疑惑，为什么在<code>vite build</code>命令执行之前要先执行<code>tsc</code>呢？</p> <p><code>tsc</code> 作为 TypeScript 的官方编译命令，可以用来编译 TypeScript 代码并进行类型检查，而这里的作用主要是用来做类型检查，我们可以从项目的<code>tsconfig.json</code>中注意到这样一个配置:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 省略其他配置</span>
    <span class="token comment">// 1. noEmit 表示只做类型检查，而不会输出产物文件</span>
    <span class="token comment">// 2. 这行配置与 tsc --noEmit 命令等效</span>
    <span class="token string">&quot;noEmit&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>虽然 Vite 提供了开箱即用的 TypeScript 以及 JSX 的编译能力，但实际上底层并没有实现 TypeScript 的类型校验系统，因此需要借助 tsc 来完成类型校验(在 Vue 项目中使用 vue-tsc 这个工具来完成)，在打包前提早暴露出类型相关的问题，保证代码的健壮性。</p> <p>执行命令</p> <div class="language- extra-class"><pre class="language-text"><code>pnpm run build
</code></pre></div><p>此时 Vite 已经生成了最终的打包产物，我们可以通过 <code>pnpm run preview</code> 命令预览一下打包产物的执行效果。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">4/15/2022, 10:18:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/yg-notes/vite/chapter1/" class="prev router-link-active">
        module standard
      </a></span> <span class="next"><a href="/yg-notes/vite/chapter2/">
        vite中接入 css
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/yg-notes/assets/js/app.b3cad06d.js" defer></script><script src="/yg-notes/assets/js/2.7fcefaab.js" defer></script><script src="/yg-notes/assets/js/75.e8d9233f.js" defer></script>
  </body>
</html>
